{"ast":null,"code":"import * as i2 from '@angular/common';\nimport { DOCUMENT, isPlatformServer, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Optional, Inject, EventEmitter, SecurityContext, PLATFORM_ID, Directive, Input, Output, ElementRef, ChangeDetectorRef, Renderer2, NgZone, forwardRef, Component, ViewEncapsulation, NgModule } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { defer, Subscription, fromEvent } from 'rxjs';\nimport { shareReplay, debounceTime } from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { __awaiter } from 'tslib';\nconst _c0 = [[[\"\", \"quill-editor-toolbar\", \"\"]]];\nconst _c1 = [\"[quill-editor-toolbar]\"];\nconst defaultModules = {\n  toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{\n    header: 1\n  }, {\n    header: 2\n  }], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], [{\n    script: 'sub'\n  }, {\n    script: 'super'\n  }], [{\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], [{\n    direction: 'rtl'\n  }], [{\n    size: ['small', false, 'large', 'huge']\n  }], [{\n    header: [1, 2, 3, 4, 5, 6, false]\n  }], [{\n    color: []\n  }, {\n    background: []\n  }], [{\n    font: []\n  }], [{\n    align: []\n  }], ['clean'], ['link', 'image', 'video'] // link and image, video\n  ]\n};\n\nconst getFormat = (format, configFormat) => {\n  const passedFormat = format || configFormat;\n  return passedFormat || 'html';\n};\n\nconst QUILL_CONFIG_TOKEN = new InjectionToken('config', {\n  providedIn: 'root',\n  factory: () => ({\n    modules: defaultModules\n  })\n});\n\nclass QuillService {\n  constructor(injector, config) {\n    this.config = config;\n    this.quill$ = defer(() => __awaiter(this, void 0, void 0, function* () {\n      var _a, _b; // Quill adds events listeners on import https://github.com/quilljs/quill/blob/develop/core/emitter.js#L8\n      // We'd want to use the unpatched `addEventListener` method to have all event callbacks to be run outside of zone.\n      // We don't know yet if the `zone.js` is used or not, just save the value to restore it back further.\n\n\n      const maybePatchedAddEventListener = this.document.addEventListener; // There're 2 types of Angular applications:\n      // 1) zone-full (by default)\n      // 2) zone-less\n      // The developer can avoid importing the `zone.js` package and tells Angular that he/she is responsible for running\n      // the change detection by himself. This is done by \"nooping\" the zone through `CompilerOptions` when bootstrapping\n      // the root module. We fallback to `document.addEventListener` if `__zone_symbol__addEventListener` is not defined,\n      // this means the `zone.js` is not imported.\n      // The `__zone_symbol__addEventListener` is basically a native DOM API, which is not patched by zone.js, thus not even going\n      // through the `zone.js` task lifecycle. You can also access the native DOM API as follows `target[Zone.__symbol__('methodName')]`.\n      // eslint-disable-next-line @typescript-eslint/dot-notation\n\n      this.document.addEventListener = this.document['__zone_symbol__addEventListener'] || this.document.addEventListener;\n      const quillImport = yield import('quill');\n      this.document.addEventListener = maybePatchedAddEventListener;\n      this.Quill = quillImport.default ? quillImport.default : quillImport; // Only register custom options and modules once\n\n      (_a = this.config.customOptions) === null || _a === void 0 ? void 0 : _a.forEach(customOption => {\n        const newCustomOption = this.Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        this.Quill.register(newCustomOption, true, this.config.suppressGlobalRegisterWarning);\n      });\n      (_b = this.config.customModules) === null || _b === void 0 ? void 0 : _b.forEach(({\n        implementation,\n        path\n      }) => {\n        this.Quill.register(path, implementation, this.config.suppressGlobalRegisterWarning);\n      });\n      return this.Quill;\n    })).pipe(shareReplay({\n      bufferSize: 1,\n      refCount: true\n    }));\n    this.document = injector.get(DOCUMENT);\n\n    if (!this.config) {\n      this.config = {\n        modules: defaultModules\n      };\n    }\n  }\n\n  getQuill() {\n    return this.quill$;\n  }\n\n}\n\nQuillService.ɵfac = function QuillService_Factory(t) {\n  return new (t || QuillService)(i0.ɵɵinject(i0.Injector), i0.ɵɵinject(QUILL_CONFIG_TOKEN, 8));\n};\n\nQuillService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: QuillService,\n  factory: QuillService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [QUILL_CONFIG_TOKEN]\n      }]\n    }];\n  }, null);\n})(); // eslint-disable-next-line @angular-eslint/directive-class-suffix\n\n\nclass QuillEditorBase {\n  constructor(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service) {\n    this.elementRef = elementRef;\n    this.cd = cd;\n    this.domSanitizer = domSanitizer;\n    this.platformId = platformId;\n    this.renderer = renderer;\n    this.zone = zone;\n    this.service = service;\n    this.required = false;\n    this.customToolbarPosition = 'top';\n    this.sanitize = false;\n    this.styles = null;\n    this.strict = true;\n    this.customOptions = [];\n    this.customModules = [];\n    this.preserveWhitespace = false;\n    this.trimOnValidation = false;\n    this.compareValues = false;\n    this.filterNull = false;\n    /*\n    https://github.com/KillerCodeMonkey/ngx-quill/issues/1257 - fix null value set\n           provide default empty value\n    by default null\n           e.g. defaultEmptyValue=\"\" - empty string\n           <quill-editor\n      defaultEmptyValue=\"\"\n      formControlName=\"message\"\n    ></quill-editor>\n    */\n\n    this.defaultEmptyValue = null;\n    this.onEditorCreated = new EventEmitter();\n    this.onEditorChanged = new EventEmitter();\n    this.onContentChanged = new EventEmitter();\n    this.onSelectionChanged = new EventEmitter();\n    this.onFocus = new EventEmitter();\n    this.onBlur = new EventEmitter();\n    this.disabled = false; // used to store initial value before ViewInit\n\n    this.subscription = null;\n    this.quillSubscription = null;\n\n    this.valueGetter = (quillEditor, editorElement) => {\n      let html = editorElement.querySelector('.ql-editor').innerHTML;\n\n      if (html === '<p><br></p>' || html === '<div><br></div>') {\n        html = this.defaultEmptyValue;\n      }\n\n      let modelValue = html;\n      const format = getFormat(this.format, this.service.config.format);\n\n      if (format === 'text') {\n        modelValue = quillEditor.getText();\n      } else if (format === 'object') {\n        modelValue = quillEditor.getContents();\n      } else if (format === 'json') {\n        try {\n          modelValue = JSON.stringify(quillEditor.getContents());\n        } catch (e) {\n          modelValue = quillEditor.getText();\n        }\n      }\n\n      return modelValue;\n    };\n\n    this.valueSetter = (quillEditor, value) => {\n      const format = getFormat(this.format, this.service.config.format);\n\n      if (format === 'html') {\n        if (this.sanitize) {\n          value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n        }\n\n        return quillEditor.clipboard.convert(value);\n      } else if (format === 'json') {\n        try {\n          return JSON.parse(value);\n        } catch (e) {\n          return [{\n            insert: value\n          }];\n        }\n      }\n\n      return value;\n    };\n\n    this.selectionChangeHandler = (range, oldRange, source) => {\n      const shouldTriggerOnModelTouched = !range && !!this.onModelTouched; // only emit changes when there's any listener\n\n      if (!this.onBlur.observers.length && !this.onFocus.observers.length && !this.onSelectionChanged.observers.length && !shouldTriggerOnModelTouched) {\n        return;\n      }\n\n      this.zone.run(() => {\n        if (range === null) {\n          this.onBlur.emit({\n            editor: this.quillEditor,\n            source\n          });\n        } else if (oldRange === null) {\n          this.onFocus.emit({\n            editor: this.quillEditor,\n            source\n          });\n        }\n\n        this.onSelectionChanged.emit({\n          editor: this.quillEditor,\n          oldRange,\n          range,\n          source\n        });\n\n        if (shouldTriggerOnModelTouched) {\n          this.onModelTouched();\n        }\n\n        this.cd.markForCheck();\n      });\n    };\n\n    this.textChangeHandler = (delta, oldDelta, source) => {\n      // only emit changes emitted by user interactions\n      const text = this.quillEditor.getText();\n      const content = this.quillEditor.getContents();\n      let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n\n      if (html === '<p><br></p>' || html === '<div><br></div>') {\n        html = this.defaultEmptyValue;\n      }\n\n      const trackChanges = this.trackChanges || this.service.config.trackChanges;\n      const shouldTriggerOnModelChange = (source === 'user' || trackChanges && trackChanges === 'all') && !!this.onModelChange; // only emit changes when there's any listener\n\n      if (!this.onContentChanged.observers.length && !shouldTriggerOnModelChange) {\n        return;\n      }\n\n      this.zone.run(() => {\n        if (shouldTriggerOnModelChange) {\n          this.onModelChange(this.valueGetter(this.quillEditor, this.editorElem));\n        }\n\n        this.onContentChanged.emit({\n          content,\n          delta,\n          editor: this.quillEditor,\n          html,\n          oldDelta,\n          source,\n          text\n        });\n        this.cd.markForCheck();\n      });\n    }; // eslint-disable-next-line max-len\n\n\n    this.editorChangeHandler = (event, current, old, source) => {\n      // only emit changes when there's any listener\n      if (!this.onEditorChanged.observers.length) {\n        return;\n      } // only emit changes emitted by user interactions\n\n\n      if (event === 'text-change') {\n        const text = this.quillEditor.getText();\n        const content = this.quillEditor.getContents();\n        let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n\n        if (html === '<p><br></p>' || html === '<div><br></div>') {\n          html = this.defaultEmptyValue;\n        }\n\n        this.zone.run(() => {\n          this.onEditorChanged.emit({\n            content,\n            delta: current,\n            editor: this.quillEditor,\n            event,\n            html,\n            oldDelta: old,\n            source,\n            text\n          });\n          this.cd.markForCheck();\n        });\n      } else {\n        this.zone.run(() => {\n          this.onEditorChanged.emit({\n            editor: this.quillEditor,\n            event,\n            oldRange: old,\n            range: current,\n            source\n          });\n          this.cd.markForCheck();\n        });\n      }\n    };\n\n    this.document = injector.get(DOCUMENT);\n  }\n\n  static normalizeClassNames(classes) {\n    const classList = classes.trim().split(' ');\n    return classList.reduce((prev, cur) => {\n      const trimmed = cur.trim();\n\n      if (trimmed) {\n        prev.push(trimmed);\n      }\n\n      return prev;\n    }, []);\n  }\n\n  ngAfterViewInit() {\n    if (isPlatformServer(this.platformId)) {\n      return;\n    } // The `quill-editor` component might be destroyed before the `quill` chunk is loaded and its code is executed\n    // this will lead to runtime exceptions, since the code will be executed on DOM nodes that don't exist within the tree.\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n\n\n    this.quillSubscription = this.service.getQuill().subscribe(Quill => {\n      this.elementRef.nativeElement.insertAdjacentHTML(this.customToolbarPosition === 'top' ? 'beforeend' : 'afterbegin', this.preserveWhitespace ? '<pre quill-editor-element></pre>' : '<div quill-editor-element></div>');\n      this.editorElem = this.elementRef.nativeElement.querySelector('[quill-editor-element]');\n      const toolbarElem = this.elementRef.nativeElement.querySelector('[quill-editor-toolbar]');\n      const modules = Object.assign({}, this.modules || this.service.config.modules);\n\n      if (toolbarElem) {\n        modules.toolbar = toolbarElem;\n      } else if (modules.toolbar === undefined) {\n        modules.toolbar = defaultModules.toolbar;\n      }\n\n      let placeholder = this.placeholder !== undefined ? this.placeholder : this.service.config.placeholder;\n\n      if (placeholder === undefined) {\n        placeholder = 'Insert text here ...';\n      }\n\n      if (this.styles) {\n        Object.keys(this.styles).forEach(key => {\n          this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n        });\n      }\n\n      if (this.classes) {\n        this.addClasses(this.classes);\n      }\n\n      this.customOptions.forEach(customOption => {\n        const newCustomOption = Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        Quill.register(newCustomOption, true);\n      });\n      this.customModules.forEach(({\n        implementation,\n        path\n      }) => {\n        Quill.register(path, implementation);\n      });\n      let bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\n\n      if (!bounds) {\n        bounds = this.service.config.bounds ? this.service.config.bounds : this.document.body;\n      }\n\n      let debug = this.debug;\n\n      if (!debug && debug !== false && this.service.config.debug) {\n        debug = this.service.config.debug;\n      }\n\n      let readOnly = this.readOnly;\n\n      if (!readOnly && this.readOnly !== false) {\n        readOnly = this.service.config.readOnly !== undefined ? this.service.config.readOnly : false;\n      }\n\n      let defaultEmptyValue = this.defaultEmptyValue;\n\n      if (this.service.config.hasOwnProperty('defaultEmptyValue')) {\n        defaultEmptyValue = this.service.config.defaultEmptyValue;\n      }\n\n      let scrollingContainer = this.scrollingContainer;\n\n      if (!scrollingContainer && this.scrollingContainer !== null) {\n        scrollingContainer = this.service.config.scrollingContainer === null || this.service.config.scrollingContainer ? this.service.config.scrollingContainer : null;\n      }\n\n      let formats = this.formats;\n\n      if (!formats && formats === undefined) {\n        formats = this.service.config.formats ? [...this.service.config.formats] : this.service.config.formats === null ? null : undefined;\n      }\n\n      this.zone.runOutsideAngular(() => {\n        var _a, _b, _c;\n\n        this.quillEditor = new Quill(this.editorElem, {\n          bounds,\n          debug: debug,\n          formats: formats,\n          modules,\n          placeholder,\n          readOnly,\n          defaultEmptyValue,\n          scrollingContainer: scrollingContainer,\n          strict: this.strict,\n          theme: this.theme || (this.service.config.theme ? this.service.config.theme : 'snow')\n        }); // Set optional link placeholder, Quill has no native API for it so using workaround\n\n        if (this.linkPlaceholder) {\n          const tooltip = (_b = (_a = this.quillEditor) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.tooltip;\n          const input = (_c = tooltip === null || tooltip === void 0 ? void 0 : tooltip.root) === null || _c === void 0 ? void 0 : _c.querySelector('input[data-link]');\n\n          if (input === null || input === void 0 ? void 0 : input.dataset) {\n            input.dataset.link = this.linkPlaceholder;\n          }\n        }\n      });\n\n      if (this.content) {\n        const format = getFormat(this.format, this.service.config.format);\n\n        if (format === 'text') {\n          this.quillEditor.setText(this.content, 'silent');\n        } else {\n          const newValue = this.valueSetter(this.quillEditor, this.content);\n          this.quillEditor.setContents(newValue, 'silent');\n        }\n\n        this.quillEditor.getModule('history').clear();\n      } // initialize disabled status based on this.disabled as default value\n\n\n      this.setDisabledState();\n      this.addQuillEventListeners(); // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n      // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n\n      if (!this.onEditorCreated.observers.length && !this.onValidatorChanged) {\n        return;\n      } // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n      // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n      // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n\n\n      requestAnimationFrame(() => {\n        if (this.onValidatorChanged) {\n          this.onValidatorChanged();\n        }\n\n        this.onEditorCreated.emit(this.quillEditor);\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    var _a;\n\n    this.dispose();\n    (_a = this.quillSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    this.quillSubscription = null;\n  }\n\n  ngOnChanges(changes) {\n    if (!this.quillEditor) {\n      return;\n    }\n    /* eslint-disable @typescript-eslint/dot-notation */\n\n\n    if (changes.readOnly) {\n      this.quillEditor.enable(!changes.readOnly.currentValue);\n    }\n\n    if (changes.placeholder) {\n      this.quillEditor.root.dataset.placeholder = changes.placeholder.currentValue;\n    }\n\n    if (changes.defaultEmptyValue) {\n      this.quillEditor.root.dataset.defaultEmptyValue = changes.defaultEmptyValue.currentValue;\n    }\n\n    if (changes.styles) {\n      const currentStyling = changes.styles.currentValue;\n      const previousStyling = changes.styles.previousValue;\n\n      if (previousStyling) {\n        Object.keys(previousStyling).forEach(key => {\n          this.renderer.removeStyle(this.editorElem, key);\n        });\n      }\n\n      if (currentStyling) {\n        Object.keys(currentStyling).forEach(key => {\n          this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n        });\n      }\n    }\n\n    if (changes.classes) {\n      const currentClasses = changes.classes.currentValue;\n      const previousClasses = changes.classes.previousValue;\n\n      if (previousClasses) {\n        this.removeClasses(previousClasses);\n      }\n\n      if (currentClasses) {\n        this.addClasses(currentClasses);\n      }\n    } // We'd want to re-apply event listeners if the `debounceTime` binding changes to apply the\n    // `debounceTime` operator or vice-versa remove it.\n\n\n    if (changes.debounceTime) {\n      this.addQuillEventListeners();\n    }\n    /* eslint-enable @typescript-eslint/dot-notation */\n\n  }\n\n  addClasses(classList) {\n    QuillEditorBase.normalizeClassNames(classList).forEach(c => {\n      this.renderer.addClass(this.editorElem, c);\n    });\n  }\n\n  removeClasses(classList) {\n    QuillEditorBase.normalizeClassNames(classList).forEach(c => {\n      this.renderer.removeClass(this.editorElem, c);\n    });\n  }\n\n  writeValue(currentValue) {\n    // optional fix for https://github.com/angular/angular/issues/14988\n    if (this.filterNull && currentValue === null) {\n      return;\n    }\n\n    this.content = currentValue;\n\n    if (!this.quillEditor) {\n      return;\n    }\n\n    const format = getFormat(this.format, this.service.config.format);\n    const newValue = this.valueSetter(this.quillEditor, currentValue);\n\n    if (this.compareValues) {\n      const currentEditorValue = this.quillEditor.getContents();\n\n      if (JSON.stringify(currentEditorValue) === JSON.stringify(newValue)) {\n        return;\n      }\n    }\n\n    if (currentValue) {\n      if (format === 'text') {\n        this.quillEditor.setText(currentValue);\n      } else {\n        this.quillEditor.setContents(newValue);\n      }\n\n      return;\n    }\n\n    this.quillEditor.setText('');\n  }\n\n  setDisabledState(isDisabled = this.disabled) {\n    // store initial value to set appropriate disabled status after ViewInit\n    this.disabled = isDisabled;\n\n    if (this.quillEditor) {\n      if (isDisabled) {\n        this.quillEditor.disable();\n        this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\n      } else {\n        if (!this.readOnly) {\n          this.quillEditor.enable();\n        }\n\n        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n      }\n    }\n  }\n\n  registerOnChange(fn) {\n    this.onModelChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onModelTouched = fn;\n  }\n\n  registerOnValidatorChange(fn) {\n    this.onValidatorChanged = fn;\n  }\n\n  validate() {\n    if (!this.quillEditor) {\n      return null;\n    }\n\n    const err = {};\n    let valid = true;\n    const text = this.quillEditor.getText(); // trim text if wanted + handle special case that an empty editor contains a new line\n\n    const textLength = this.trimOnValidation ? text.trim().length : text.length === 1 && text.trim().length === 0 ? 0 : text.length - 1;\n    const deltaOperations = this.quillEditor.getContents().ops;\n    const onlyEmptyOperation = deltaOperations && deltaOperations.length === 1 && ['\\n', ''].includes(deltaOperations[0].insert);\n\n    if (this.minLength && textLength && textLength < this.minLength) {\n      err.minLengthError = {\n        given: textLength,\n        minLength: this.minLength\n      };\n      valid = false;\n    }\n\n    if (this.maxLength && textLength > this.maxLength) {\n      err.maxLengthError = {\n        given: textLength,\n        maxLength: this.maxLength\n      };\n      valid = false;\n    }\n\n    if (this.required && !textLength && onlyEmptyOperation) {\n      err.requiredError = {\n        empty: true\n      };\n      valid = false;\n    }\n\n    return valid ? null : err;\n  }\n\n  addQuillEventListeners() {\n    this.dispose(); // We have to enter the `<root>` zone when adding event listeners, so `debounceTime` will spawn the\n    // `AsyncAction` there w/o triggering change detections. We still re-enter the Angular's zone through\n    // `zone.run` when we emit an event to the parent component.\n\n    this.zone.runOutsideAngular(() => {\n      this.subscription = new Subscription();\n      this.subscription.add( // mark model as touched if editor lost focus\n      fromEvent(this.quillEditor, 'selection-change').subscribe(([range, oldRange, source]) => {\n        this.selectionChangeHandler(range, oldRange, source);\n      })); // The `fromEvent` supports passing JQuery-style event targets, the editor has `on` and `off` methods which\n      // will be invoked upon subscription and teardown.\n\n      let textChange$ = fromEvent(this.quillEditor, 'text-change');\n      let editorChange$ = fromEvent(this.quillEditor, 'editor-change');\n\n      if (typeof this.debounceTime === 'number') {\n        textChange$ = textChange$.pipe(debounceTime(this.debounceTime));\n        editorChange$ = editorChange$.pipe(debounceTime(this.debounceTime));\n      }\n\n      this.subscription.add( // update model if text changes\n      textChange$.subscribe(([delta, oldDelta, source]) => {\n        this.textChangeHandler(delta, oldDelta, source);\n      }));\n      this.subscription.add( // triggered if selection or text changed\n      editorChange$.subscribe(([event, current, old, source]) => {\n        this.editorChangeHandler(event, current, old, source);\n      }));\n    });\n  }\n\n  dispose() {\n    if (this.subscription !== null) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n\n}\n\nQuillEditorBase.ɵfac = function QuillEditorBase_Factory(t) {\n  return new (t || QuillEditorBase)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(QuillService));\n};\n\nQuillEditorBase.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: QuillEditorBase,\n  inputs: {\n    format: \"format\",\n    theme: \"theme\",\n    modules: \"modules\",\n    debug: \"debug\",\n    readOnly: \"readOnly\",\n    placeholder: \"placeholder\",\n    maxLength: \"maxLength\",\n    minLength: \"minLength\",\n    required: \"required\",\n    formats: \"formats\",\n    customToolbarPosition: \"customToolbarPosition\",\n    sanitize: \"sanitize\",\n    styles: \"styles\",\n    strict: \"strict\",\n    scrollingContainer: \"scrollingContainer\",\n    bounds: \"bounds\",\n    customOptions: \"customOptions\",\n    customModules: \"customModules\",\n    trackChanges: \"trackChanges\",\n    preserveWhitespace: \"preserveWhitespace\",\n    classes: \"classes\",\n    trimOnValidation: \"trimOnValidation\",\n    linkPlaceholder: \"linkPlaceholder\",\n    compareValues: \"compareValues\",\n    filterNull: \"filterNull\",\n    debounceTime: \"debounceTime\",\n    defaultEmptyValue: \"defaultEmptyValue\",\n    valueGetter: \"valueGetter\",\n    valueSetter: \"valueSetter\"\n  },\n  outputs: {\n    onEditorCreated: \"onEditorCreated\",\n    onEditorChanged: \"onEditorChanged\",\n    onContentChanged: \"onContentChanged\",\n    onSelectionChanged: \"onSelectionChanged\",\n    onFocus: \"onFocus\",\n    onBlur: \"onBlur\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillEditorBase, [{\n    type: Directive\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i1.DomSanitizer\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.NgZone\n    }, {\n      type: QuillService\n    }];\n  }, {\n    format: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    modules: [{\n      type: Input\n    }],\n    debug: [{\n      type: Input\n    }],\n    readOnly: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    maxLength: [{\n      type: Input\n    }],\n    minLength: [{\n      type: Input\n    }],\n    required: [{\n      type: Input\n    }],\n    formats: [{\n      type: Input\n    }],\n    customToolbarPosition: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }],\n    styles: [{\n      type: Input\n    }],\n    strict: [{\n      type: Input\n    }],\n    scrollingContainer: [{\n      type: Input\n    }],\n    bounds: [{\n      type: Input\n    }],\n    customOptions: [{\n      type: Input\n    }],\n    customModules: [{\n      type: Input\n    }],\n    trackChanges: [{\n      type: Input\n    }],\n    preserveWhitespace: [{\n      type: Input\n    }],\n    classes: [{\n      type: Input\n    }],\n    trimOnValidation: [{\n      type: Input\n    }],\n    linkPlaceholder: [{\n      type: Input\n    }],\n    compareValues: [{\n      type: Input\n    }],\n    filterNull: [{\n      type: Input\n    }],\n    debounceTime: [{\n      type: Input\n    }],\n    defaultEmptyValue: [{\n      type: Input\n    }],\n    onEditorCreated: [{\n      type: Output\n    }],\n    onEditorChanged: [{\n      type: Output\n    }],\n    onContentChanged: [{\n      type: Output\n    }],\n    onSelectionChanged: [{\n      type: Output\n    }],\n    onFocus: [{\n      type: Output\n    }],\n    onBlur: [{\n      type: Output\n    }],\n    valueGetter: [{\n      type: Input\n    }],\n    valueSetter: [{\n      type: Input\n    }]\n  });\n})();\n\nclass QuillEditorComponent extends QuillEditorBase {\n  constructor(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service) {\n    super(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service);\n  }\n\n}\n\nQuillEditorComponent.ɵfac = function QuillEditorComponent_Factory(t) {\n  return new (t || QuillEditorComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(ChangeDetectorRef), i0.ɵɵdirectiveInject(DomSanitizer), i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(Renderer2), i0.ɵɵdirectiveInject(NgZone), i0.ɵɵdirectiveInject(QuillService));\n};\n\nQuillEditorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: QuillEditorComponent,\n  selectors: [[\"quill-editor\"]],\n  features: [i0.ɵɵProvidersFeature([{\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    useExisting: forwardRef(() => QuillEditorComponent)\n  }, {\n    multi: true,\n    provide: NG_VALIDATORS,\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    useExisting: forwardRef(() => QuillEditorComponent)\n  }]), i0.ɵɵInheritDefinitionFeature],\n  ngContentSelectors: _c1,\n  decls: 1,\n  vars: 0,\n  template: function QuillEditorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef(_c0);\n      i0.ɵɵprojection(0);\n    }\n  },\n  styles: [\":host{display:inline-block}\\n\"],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillEditorComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.None,\n      providers: [{\n        multi: true,\n        provide: NG_VALUE_ACCESSOR,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        useExisting: forwardRef(() => QuillEditorComponent)\n      }, {\n        multi: true,\n        provide: NG_VALIDATORS,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        useExisting: forwardRef(() => QuillEditorComponent)\n      }],\n      selector: 'quill-editor',\n      template: `\n  <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n`,\n      styles: [`\n    :host {\n      display: inline-block;\n    }\n    `]\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: i0.ElementRef,\n      decorators: [{\n        type: Inject,\n        args: [ElementRef]\n      }]\n    }, {\n      type: i0.ChangeDetectorRef,\n      decorators: [{\n        type: Inject,\n        args: [ChangeDetectorRef]\n      }]\n    }, {\n      type: i1.DomSanitizer,\n      decorators: [{\n        type: Inject,\n        args: [DomSanitizer]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: i0.Renderer2,\n      decorators: [{\n        type: Inject,\n        args: [Renderer2]\n      }]\n    }, {\n      type: i0.NgZone,\n      decorators: [{\n        type: Inject,\n        args: [NgZone]\n      }]\n    }, {\n      type: QuillService,\n      decorators: [{\n        type: Inject,\n        args: [QuillService]\n      }]\n    }];\n  }, null);\n})();\n\nclass QuillViewHTMLComponent {\n  constructor(sanitizer, service) {\n    this.sanitizer = sanitizer;\n    this.service = service;\n    this.content = '';\n    this.sanitize = false;\n    this.innerHTML = '';\n    this.themeClass = 'ql-snow';\n  }\n\n  ngOnChanges(changes) {\n    if (changes.theme) {\n      const theme = changes.theme.currentValue || (this.service.config.theme ? this.service.config.theme : 'snow');\n      this.themeClass = `ql-${theme} ngx-quill-view-html`;\n    } else if (!this.theme) {\n      const theme = this.service.config.theme ? this.service.config.theme : 'snow';\n      this.themeClass = `ql-${theme} ngx-quill-view-html`;\n    }\n\n    if (changes.content) {\n      const content = changes.content.currentValue;\n      this.innerHTML = this.sanitize ? content : this.sanitizer.bypassSecurityTrustHtml(content);\n    }\n  }\n\n}\n\nQuillViewHTMLComponent.ɵfac = function QuillViewHTMLComponent_Factory(t) {\n  return new (t || QuillViewHTMLComponent)(i0.ɵɵdirectiveInject(DomSanitizer), i0.ɵɵdirectiveInject(QuillService));\n};\n\nQuillViewHTMLComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: QuillViewHTMLComponent,\n  selectors: [[\"quill-view-html\"]],\n  inputs: {\n    content: \"content\",\n    theme: \"theme\",\n    sanitize: \"sanitize\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 2,\n  consts: [[1, \"ql-container\", 3, \"ngClass\"], [1, \"ql-editor\", 3, \"innerHTML\"]],\n  template: function QuillViewHTMLComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngClass\", ctx.themeClass);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"innerHTML\", ctx.innerHTML, i0.ɵɵsanitizeHtml);\n    }\n  },\n  directives: [i2.NgClass],\n  styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillViewHTMLComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.None,\n      selector: 'quill-view-html',\n      styles: [`\n.ql-container.ngx-quill-view-html {\n  border: 0;\n}\n`],\n      template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`\n    }]\n  }], function () {\n    return [{\n      type: i1.DomSanitizer,\n      decorators: [{\n        type: Inject,\n        args: [DomSanitizer]\n      }]\n    }, {\n      type: QuillService\n    }];\n  }, {\n    content: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }]\n  });\n})();\n\nclass QuillViewComponent {\n  constructor(elementRef, renderer, zone, service, domSanitizer, platformId) {\n    this.elementRef = elementRef;\n    this.renderer = renderer;\n    this.zone = zone;\n    this.service = service;\n    this.domSanitizer = domSanitizer;\n    this.platformId = platformId;\n    this.sanitize = false;\n    this.strict = true;\n    this.customModules = [];\n    this.customOptions = [];\n    this.preserveWhitespace = false;\n    this.onEditorCreated = new EventEmitter();\n    this.quillSubscription = null;\n\n    this.valueSetter = (quillEditor, value) => {\n      const format = getFormat(this.format, this.service.config.format);\n      let content = value;\n\n      if (format === 'text') {\n        quillEditor.setText(content);\n      } else {\n        if (format === 'html') {\n          if (this.sanitize) {\n            value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n          }\n\n          content = quillEditor.clipboard.convert(value);\n        } else if (format === 'json') {\n          try {\n            content = JSON.parse(value);\n          } catch (e) {\n            content = [{\n              insert: value\n            }];\n          }\n        }\n\n        quillEditor.setContents(content);\n      }\n    };\n  }\n\n  ngOnChanges(changes) {\n    if (!this.quillEditor) {\n      return;\n    }\n\n    if (changes.content) {\n      this.valueSetter(this.quillEditor, changes.content.currentValue);\n    }\n  }\n\n  ngAfterViewInit() {\n    if (isPlatformServer(this.platformId)) {\n      return;\n    } // eslint-disable-next-line @typescript-eslint/naming-convention\n\n\n    this.quillSubscription = this.service.getQuill().subscribe(Quill => {\n      const modules = Object.assign({}, this.modules || this.service.config.modules);\n      modules.toolbar = false;\n      this.customOptions.forEach(customOption => {\n        const newCustomOption = Quill.import(customOption.import);\n        newCustomOption.whitelist = customOption.whitelist;\n        Quill.register(newCustomOption, true);\n      });\n      this.customModules.forEach(({\n        implementation,\n        path\n      }) => {\n        Quill.register(path, implementation);\n      });\n      let debug = this.debug;\n\n      if (!debug && debug !== false && this.service.config.debug) {\n        debug = this.service.config.debug;\n      }\n\n      let formats = this.formats;\n\n      if (!formats && formats === undefined) {\n        formats = this.service.config.formats ? Object.assign({}, this.service.config.formats) : this.service.config.formats === null ? null : undefined;\n      }\n\n      const theme = this.theme || (this.service.config.theme ? this.service.config.theme : 'snow');\n      this.elementRef.nativeElement.insertAdjacentHTML('afterbegin', this.preserveWhitespace ? '<pre quill-view-element></pre>' : '<div quill-view-element></div>');\n      this.editorElem = this.elementRef.nativeElement.querySelector('[quill-view-element]');\n      this.zone.runOutsideAngular(() => {\n        this.quillEditor = new Quill(this.editorElem, {\n          debug: debug,\n          formats: formats,\n          modules,\n          readOnly: true,\n          strict: this.strict,\n          theme\n        });\n      });\n      this.renderer.addClass(this.editorElem, 'ngx-quill-view');\n\n      if (this.content) {\n        this.valueSetter(this.quillEditor, this.content);\n      } // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n      // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n\n\n      if (!this.onEditorCreated.observers.length) {\n        return;\n      } // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n      // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n      // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n\n\n      requestAnimationFrame(() => {\n        this.onEditorCreated.emit(this.quillEditor);\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    var _a;\n\n    (_a = this.quillSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    this.quillSubscription = null;\n  }\n\n}\n\nQuillViewComponent.ɵfac = function QuillViewComponent_Factory(t) {\n  return new (t || QuillViewComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(QuillService), i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(PLATFORM_ID));\n};\n\nQuillViewComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: QuillViewComponent,\n  selectors: [[\"quill-view\"]],\n  inputs: {\n    format: \"format\",\n    theme: \"theme\",\n    modules: \"modules\",\n    debug: \"debug\",\n    formats: \"formats\",\n    sanitize: \"sanitize\",\n    strict: \"strict\",\n    content: \"content\",\n    customModules: \"customModules\",\n    customOptions: \"customOptions\",\n    preserveWhitespace: \"preserveWhitespace\"\n  },\n  outputs: {\n    onEditorCreated: \"onEditorCreated\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 0,\n  vars: 0,\n  template: function QuillViewComponent_Template(rf, ctx) {},\n  styles: [\".ql-container.ngx-quill-view{border:0}\\n\"],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillViewComponent, [{\n    type: Component,\n    args: [{\n      encapsulation: ViewEncapsulation.None,\n      selector: 'quill-view',\n      styles: [`\n.ql-container.ngx-quill-view {\n  border: 0;\n}\n`],\n      template: `\n`\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.NgZone\n    }, {\n      type: QuillService\n    }, {\n      type: i1.DomSanitizer\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, {\n    format: [{\n      type: Input\n    }],\n    theme: [{\n      type: Input\n    }],\n    modules: [{\n      type: Input\n    }],\n    debug: [{\n      type: Input\n    }],\n    formats: [{\n      type: Input\n    }],\n    sanitize: [{\n      type: Input\n    }],\n    strict: [{\n      type: Input\n    }],\n    content: [{\n      type: Input\n    }],\n    customModules: [{\n      type: Input\n    }],\n    customOptions: [{\n      type: Input\n    }],\n    preserveWhitespace: [{\n      type: Input\n    }],\n    onEditorCreated: [{\n      type: Output\n    }]\n  });\n})();\n\nclass QuillModule {\n  static forRoot(config) {\n    return {\n      ngModule: QuillModule,\n      providers: [{\n        provide: QUILL_CONFIG_TOKEN,\n        useValue: config\n      }]\n    };\n  }\n\n}\n\nQuillModule.ɵfac = function QuillModule_Factory(t) {\n  return new (t || QuillModule)();\n};\n\nQuillModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: QuillModule\n});\nQuillModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(QuillModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n      exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n      imports: [CommonModule]\n    }]\n  }], null, null);\n})();\n/*\n * Public API Surface of ngx-quill\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { QUILL_CONFIG_TOKEN, QuillEditorBase, QuillEditorComponent, QuillModule, QuillService, QuillViewComponent, QuillViewHTMLComponent, defaultModules };","map":{"version":3,"sources":["C:/Users/m-syr/Desktop/myWB/frontend/node_modules/ngx-quill/fesm2015/ngx-quill.mjs"],"names":["i2","DOCUMENT","isPlatformServer","CommonModule","i0","InjectionToken","Injectable","Optional","Inject","EventEmitter","SecurityContext","PLATFORM_ID","Directive","Input","Output","ElementRef","ChangeDetectorRef","Renderer2","NgZone","forwardRef","Component","ViewEncapsulation","NgModule","i1","DomSanitizer","defer","Subscription","fromEvent","shareReplay","debounceTime","NG_VALUE_ACCESSOR","NG_VALIDATORS","__awaiter","defaultModules","toolbar","header","list","script","indent","direction","size","color","background","font","align","getFormat","format","configFormat","passedFormat","QUILL_CONFIG_TOKEN","providedIn","factory","modules","QuillService","constructor","injector","config","quill$","_a","_b","maybePatchedAddEventListener","document","addEventListener","quillImport","Quill","default","customOptions","forEach","customOption","newCustomOption","import","whitelist","register","suppressGlobalRegisterWarning","customModules","implementation","path","pipe","bufferSize","refCount","get","getQuill","ɵfac","Injector","ɵprov","type","args","undefined","decorators","QuillEditorBase","elementRef","cd","domSanitizer","platformId","renderer","zone","service","required","customToolbarPosition","sanitize","styles","strict","preserveWhitespace","trimOnValidation","compareValues","filterNull","defaultEmptyValue","onEditorCreated","onEditorChanged","onContentChanged","onSelectionChanged","onFocus","onBlur","disabled","subscription","quillSubscription","valueGetter","quillEditor","editorElement","html","querySelector","innerHTML","modelValue","getText","getContents","JSON","stringify","e","valueSetter","value","HTML","clipboard","convert","parse","insert","selectionChangeHandler","range","oldRange","source","shouldTriggerOnModelTouched","onModelTouched","observers","length","run","emit","editor","markForCheck","textChangeHandler","delta","oldDelta","text","content","editorElem","trackChanges","shouldTriggerOnModelChange","onModelChange","editorChangeHandler","event","current","old","normalizeClassNames","classes","classList","trim","split","reduce","prev","cur","trimmed","push","ngAfterViewInit","subscribe","nativeElement","insertAdjacentHTML","toolbarElem","Object","assign","placeholder","keys","key","setStyle","addClasses","bounds","body","debug","readOnly","hasOwnProperty","scrollingContainer","formats","runOutsideAngular","_c","theme","linkPlaceholder","tooltip","input","root","dataset","link","setText","newValue","setContents","getModule","clear","setDisabledState","addQuillEventListeners","onValidatorChanged","requestAnimationFrame","ngOnDestroy","dispose","unsubscribe","ngOnChanges","changes","enable","currentValue","currentStyling","previousStyling","previousValue","removeStyle","currentClasses","previousClasses","removeClasses","c","addClass","removeClass","writeValue","currentEditorValue","isDisabled","disable","setAttribute","removeAttribute","registerOnChange","fn","registerOnTouched","registerOnValidatorChange","validate","err","valid","textLength","deltaOperations","ops","onlyEmptyOperation","includes","minLength","minLengthError","given","maxLength","maxLengthError","requiredError","empty","add","textChange$","editorChange$","ɵdir","QuillEditorComponent","ɵcmp","multi","provide","useExisting","encapsulation","None","providers","selector","template","QuillViewHTMLComponent","sanitizer","themeClass","bypassSecurityTrustHtml","NgClass","QuillViewComponent","QuillModule","forRoot","ngModule","useValue","ɵmod","ɵinj","declarations","exports","imports"],"mappings":"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","sourcesContent":["import * as i2 from '@angular/common';\nimport { DOCUMENT, isPlatformServer, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Optional, Inject, EventEmitter, SecurityContext, PLATFORM_ID, Directive, Input, Output, ElementRef, ChangeDetectorRef, Renderer2, NgZone, forwardRef, Component, ViewEncapsulation, NgModule } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { defer, Subscription, fromEvent } from 'rxjs';\nimport { shareReplay, debounceTime } from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { __awaiter } from 'tslib';\n\nconst defaultModules = {\n    toolbar: [\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote', 'code-block'],\n        [{ header: 1 }, { header: 2 }],\n        [{ list: 'ordered' }, { list: 'bullet' }],\n        [{ script: 'sub' }, { script: 'super' }],\n        [{ indent: '-1' }, { indent: '+1' }],\n        [{ direction: 'rtl' }],\n        [{ size: ['small', false, 'large', 'huge'] }],\n        [{ header: [1, 2, 3, 4, 5, 6, false] }],\n        [\n            { color: [] },\n            { background: [] }\n        ],\n        [{ font: [] }],\n        [{ align: [] }],\n        ['clean'],\n        ['link', 'image', 'video'] // link and image, video\n    ]\n};\n\nconst getFormat = (format, configFormat) => {\n    const passedFormat = format || configFormat;\n    return passedFormat || 'html';\n};\n\nconst QUILL_CONFIG_TOKEN = new InjectionToken('config', {\n    providedIn: 'root',\n    factory: () => ({ modules: defaultModules })\n});\n\nclass QuillService {\n    constructor(injector, config) {\n        this.config = config;\n        this.quill$ = defer(() => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            // Quill adds events listeners on import https://github.com/quilljs/quill/blob/develop/core/emitter.js#L8\n            // We'd want to use the unpatched `addEventListener` method to have all event callbacks to be run outside of zone.\n            // We don't know yet if the `zone.js` is used or not, just save the value to restore it back further.\n            const maybePatchedAddEventListener = this.document.addEventListener;\n            // There're 2 types of Angular applications:\n            // 1) zone-full (by default)\n            // 2) zone-less\n            // The developer can avoid importing the `zone.js` package and tells Angular that he/she is responsible for running\n            // the change detection by himself. This is done by \"nooping\" the zone through `CompilerOptions` when bootstrapping\n            // the root module. We fallback to `document.addEventListener` if `__zone_symbol__addEventListener` is not defined,\n            // this means the `zone.js` is not imported.\n            // The `__zone_symbol__addEventListener` is basically a native DOM API, which is not patched by zone.js, thus not even going\n            // through the `zone.js` task lifecycle. You can also access the native DOM API as follows `target[Zone.__symbol__('methodName')]`.\n            // eslint-disable-next-line @typescript-eslint/dot-notation\n            this.document.addEventListener = this.document['__zone_symbol__addEventListener'] || this.document.addEventListener;\n            const quillImport = yield import('quill');\n            this.document.addEventListener = maybePatchedAddEventListener;\n            this.Quill = (quillImport.default ? quillImport.default : quillImport);\n            // Only register custom options and modules once\n            (_a = this.config.customOptions) === null || _a === void 0 ? void 0 : _a.forEach((customOption) => {\n                const newCustomOption = this.Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                this.Quill.register(newCustomOption, true, this.config.suppressGlobalRegisterWarning);\n            });\n            (_b = this.config.customModules) === null || _b === void 0 ? void 0 : _b.forEach(({ implementation, path }) => {\n                this.Quill.register(path, implementation, this.config.suppressGlobalRegisterWarning);\n            });\n            return this.Quill;\n        })).pipe(shareReplay({ bufferSize: 1, refCount: true }));\n        this.document = injector.get(DOCUMENT);\n        if (!this.config) {\n            this.config = { modules: defaultModules };\n        }\n    }\n    getQuill() {\n        return this.quill$;\n    }\n}\nQuillService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillService, deps: [{ token: i0.Injector }, { token: QUILL_CONFIG_TOKEN, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nQuillService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () {\n        return [{ type: i0.Injector }, { type: undefined, decorators: [{\n                        type: Optional\n                    }, {\n                        type: Inject,\n                        args: [QUILL_CONFIG_TOKEN]\n                    }] }];\n    } });\n\n// eslint-disable-next-line @angular-eslint/directive-class-suffix\nclass QuillEditorBase {\n    constructor(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service) {\n        this.elementRef = elementRef;\n        this.cd = cd;\n        this.domSanitizer = domSanitizer;\n        this.platformId = platformId;\n        this.renderer = renderer;\n        this.zone = zone;\n        this.service = service;\n        this.required = false;\n        this.customToolbarPosition = 'top';\n        this.sanitize = false;\n        this.styles = null;\n        this.strict = true;\n        this.customOptions = [];\n        this.customModules = [];\n        this.preserveWhitespace = false;\n        this.trimOnValidation = false;\n        this.compareValues = false;\n        this.filterNull = false;\n        /*\n        https://github.com/KillerCodeMonkey/ngx-quill/issues/1257 - fix null value set\n      \n        provide default empty value\n        by default null\n      \n        e.g. defaultEmptyValue=\"\" - empty string\n      \n        <quill-editor\n          defaultEmptyValue=\"\"\n          formControlName=\"message\"\n        ></quill-editor>\n        */\n        this.defaultEmptyValue = null;\n        this.onEditorCreated = new EventEmitter();\n        this.onEditorChanged = new EventEmitter();\n        this.onContentChanged = new EventEmitter();\n        this.onSelectionChanged = new EventEmitter();\n        this.onFocus = new EventEmitter();\n        this.onBlur = new EventEmitter();\n        this.disabled = false; // used to store initial value before ViewInit\n        this.subscription = null;\n        this.quillSubscription = null;\n        this.valueGetter = (quillEditor, editorElement) => {\n            let html = editorElement.querySelector('.ql-editor').innerHTML;\n            if (html === '<p><br></p>' || html === '<div><br></div>') {\n                html = this.defaultEmptyValue;\n            }\n            let modelValue = html;\n            const format = getFormat(this.format, this.service.config.format);\n            if (format === 'text') {\n                modelValue = quillEditor.getText();\n            }\n            else if (format === 'object') {\n                modelValue = quillEditor.getContents();\n            }\n            else if (format === 'json') {\n                try {\n                    modelValue = JSON.stringify(quillEditor.getContents());\n                }\n                catch (e) {\n                    modelValue = quillEditor.getText();\n                }\n            }\n            return modelValue;\n        };\n        this.valueSetter = (quillEditor, value) => {\n            const format = getFormat(this.format, this.service.config.format);\n            if (format === 'html') {\n                if (this.sanitize) {\n                    value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n                }\n                return quillEditor.clipboard.convert(value);\n            }\n            else if (format === 'json') {\n                try {\n                    return JSON.parse(value);\n                }\n                catch (e) {\n                    return [{ insert: value }];\n                }\n            }\n            return value;\n        };\n        this.selectionChangeHandler = (range, oldRange, source) => {\n            const shouldTriggerOnModelTouched = !range && !!this.onModelTouched;\n            // only emit changes when there's any listener\n            if (!this.onBlur.observers.length &&\n                !this.onFocus.observers.length &&\n                !this.onSelectionChanged.observers.length &&\n                !shouldTriggerOnModelTouched) {\n                return;\n            }\n            this.zone.run(() => {\n                if (range === null) {\n                    this.onBlur.emit({\n                        editor: this.quillEditor,\n                        source\n                    });\n                }\n                else if (oldRange === null) {\n                    this.onFocus.emit({\n                        editor: this.quillEditor,\n                        source\n                    });\n                }\n                this.onSelectionChanged.emit({\n                    editor: this.quillEditor,\n                    oldRange,\n                    range,\n                    source\n                });\n                if (shouldTriggerOnModelTouched) {\n                    this.onModelTouched();\n                }\n                this.cd.markForCheck();\n            });\n        };\n        this.textChangeHandler = (delta, oldDelta, source) => {\n            // only emit changes emitted by user interactions\n            const text = this.quillEditor.getText();\n            const content = this.quillEditor.getContents();\n            let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n            if (html === '<p><br></p>' || html === '<div><br></div>') {\n                html = this.defaultEmptyValue;\n            }\n            const trackChanges = this.trackChanges || this.service.config.trackChanges;\n            const shouldTriggerOnModelChange = (source === 'user' || trackChanges && trackChanges === 'all') && !!this.onModelChange;\n            // only emit changes when there's any listener\n            if (!this.onContentChanged.observers.length && !shouldTriggerOnModelChange) {\n                return;\n            }\n            this.zone.run(() => {\n                if (shouldTriggerOnModelChange) {\n                    this.onModelChange(this.valueGetter(this.quillEditor, this.editorElem));\n                }\n                this.onContentChanged.emit({\n                    content,\n                    delta,\n                    editor: this.quillEditor,\n                    html,\n                    oldDelta,\n                    source,\n                    text\n                });\n                this.cd.markForCheck();\n            });\n        };\n        // eslint-disable-next-line max-len\n        this.editorChangeHandler = (event, current, old, source) => {\n            // only emit changes when there's any listener\n            if (!this.onEditorChanged.observers.length) {\n                return;\n            }\n            // only emit changes emitted by user interactions\n            if (event === 'text-change') {\n                const text = this.quillEditor.getText();\n                const content = this.quillEditor.getContents();\n                let html = this.editorElem.querySelector('.ql-editor').innerHTML;\n                if (html === '<p><br></p>' || html === '<div><br></div>') {\n                    html = this.defaultEmptyValue;\n                }\n                this.zone.run(() => {\n                    this.onEditorChanged.emit({\n                        content,\n                        delta: current,\n                        editor: this.quillEditor,\n                        event,\n                        html,\n                        oldDelta: old,\n                        source,\n                        text\n                    });\n                    this.cd.markForCheck();\n                });\n            }\n            else {\n                this.zone.run(() => {\n                    this.onEditorChanged.emit({\n                        editor: this.quillEditor,\n                        event,\n                        oldRange: old,\n                        range: current,\n                        source\n                    });\n                    this.cd.markForCheck();\n                });\n            }\n        };\n        this.document = injector.get(DOCUMENT);\n    }\n    static normalizeClassNames(classes) {\n        const classList = classes.trim().split(' ');\n        return classList.reduce((prev, cur) => {\n            const trimmed = cur.trim();\n            if (trimmed) {\n                prev.push(trimmed);\n            }\n            return prev;\n        }, []);\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platformId)) {\n            return;\n        }\n        // The `quill-editor` component might be destroyed before the `quill` chunk is loaded and its code is executed\n        // this will lead to runtime exceptions, since the code will be executed on DOM nodes that don't exist within the tree.\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        this.quillSubscription = this.service.getQuill().subscribe(Quill => {\n            this.elementRef.nativeElement.insertAdjacentHTML(this.customToolbarPosition === 'top' ? 'beforeend' : 'afterbegin', this.preserveWhitespace ? '<pre quill-editor-element></pre>' : '<div quill-editor-element></div>');\n            this.editorElem = this.elementRef.nativeElement.querySelector('[quill-editor-element]');\n            const toolbarElem = this.elementRef.nativeElement.querySelector('[quill-editor-toolbar]');\n            const modules = Object.assign({}, this.modules || this.service.config.modules);\n            if (toolbarElem) {\n                modules.toolbar = toolbarElem;\n            }\n            else if (modules.toolbar === undefined) {\n                modules.toolbar = defaultModules.toolbar;\n            }\n            let placeholder = this.placeholder !== undefined ? this.placeholder : this.service.config.placeholder;\n            if (placeholder === undefined) {\n                placeholder = 'Insert text here ...';\n            }\n            if (this.styles) {\n                Object.keys(this.styles).forEach((key) => {\n                    this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n                });\n            }\n            if (this.classes) {\n                this.addClasses(this.classes);\n            }\n            this.customOptions.forEach((customOption) => {\n                const newCustomOption = Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                Quill.register(newCustomOption, true);\n            });\n            this.customModules.forEach(({ implementation, path }) => {\n                Quill.register(path, implementation);\n            });\n            let bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\n            if (!bounds) {\n                bounds = this.service.config.bounds ? this.service.config.bounds : this.document.body;\n            }\n            let debug = this.debug;\n            if (!debug && debug !== false && this.service.config.debug) {\n                debug = this.service.config.debug;\n            }\n            let readOnly = this.readOnly;\n            if (!readOnly && this.readOnly !== false) {\n                readOnly = this.service.config.readOnly !== undefined ? this.service.config.readOnly : false;\n            }\n            let defaultEmptyValue = this.defaultEmptyValue;\n            if (this.service.config.hasOwnProperty('defaultEmptyValue')) {\n                defaultEmptyValue = this.service.config.defaultEmptyValue;\n            }\n            let scrollingContainer = this.scrollingContainer;\n            if (!scrollingContainer && this.scrollingContainer !== null) {\n                scrollingContainer =\n                    this.service.config.scrollingContainer === null\n                        || this.service.config.scrollingContainer ? this.service.config.scrollingContainer : null;\n            }\n            let formats = this.formats;\n            if (!formats && formats === undefined) {\n                formats = this.service.config.formats ? [...this.service.config.formats] : (this.service.config.formats === null ? null : undefined);\n            }\n            this.zone.runOutsideAngular(() => {\n                var _a, _b, _c;\n                this.quillEditor = new Quill(this.editorElem, {\n                    bounds,\n                    debug: debug,\n                    formats: formats,\n                    modules,\n                    placeholder,\n                    readOnly,\n                    defaultEmptyValue,\n                    scrollingContainer: scrollingContainer,\n                    strict: this.strict,\n                    theme: this.theme || (this.service.config.theme ? this.service.config.theme : 'snow')\n                });\n                // Set optional link placeholder, Quill has no native API for it so using workaround\n                if (this.linkPlaceholder) {\n                    const tooltip = (_b = (_a = this.quillEditor) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.tooltip;\n                    const input = (_c = tooltip === null || tooltip === void 0 ? void 0 : tooltip.root) === null || _c === void 0 ? void 0 : _c.querySelector('input[data-link]');\n                    if (input === null || input === void 0 ? void 0 : input.dataset) {\n                        input.dataset.link = this.linkPlaceholder;\n                    }\n                }\n            });\n            if (this.content) {\n                const format = getFormat(this.format, this.service.config.format);\n                if (format === 'text') {\n                    this.quillEditor.setText(this.content, 'silent');\n                }\n                else {\n                    const newValue = this.valueSetter(this.quillEditor, this.content);\n                    this.quillEditor.setContents(newValue, 'silent');\n                }\n                this.quillEditor.getModule('history').clear();\n            }\n            // initialize disabled status based on this.disabled as default value\n            this.setDisabledState();\n            this.addQuillEventListeners();\n            // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n            // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n            if (!this.onEditorCreated.observers.length && !this.onValidatorChanged) {\n                return;\n            }\n            // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n            // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n            // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n            requestAnimationFrame(() => {\n                if (this.onValidatorChanged) {\n                    this.onValidatorChanged();\n                }\n                this.onEditorCreated.emit(this.quillEditor);\n            });\n        });\n    }\n    ngOnDestroy() {\n        var _a;\n        this.dispose();\n        (_a = this.quillSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        this.quillSubscription = null;\n    }\n    ngOnChanges(changes) {\n        if (!this.quillEditor) {\n            return;\n        }\n        /* eslint-disable @typescript-eslint/dot-notation */\n        if (changes.readOnly) {\n            this.quillEditor.enable(!changes.readOnly.currentValue);\n        }\n        if (changes.placeholder) {\n            this.quillEditor.root.dataset.placeholder =\n                changes.placeholder.currentValue;\n        }\n        if (changes.defaultEmptyValue) {\n            this.quillEditor.root.dataset.defaultEmptyValue =\n                changes.defaultEmptyValue.currentValue;\n        }\n        if (changes.styles) {\n            const currentStyling = changes.styles.currentValue;\n            const previousStyling = changes.styles.previousValue;\n            if (previousStyling) {\n                Object.keys(previousStyling).forEach((key) => {\n                    this.renderer.removeStyle(this.editorElem, key);\n                });\n            }\n            if (currentStyling) {\n                Object.keys(currentStyling).forEach((key) => {\n                    this.renderer.setStyle(this.editorElem, key, this.styles[key]);\n                });\n            }\n        }\n        if (changes.classes) {\n            const currentClasses = changes.classes.currentValue;\n            const previousClasses = changes.classes.previousValue;\n            if (previousClasses) {\n                this.removeClasses(previousClasses);\n            }\n            if (currentClasses) {\n                this.addClasses(currentClasses);\n            }\n        }\n        // We'd want to re-apply event listeners if the `debounceTime` binding changes to apply the\n        // `debounceTime` operator or vice-versa remove it.\n        if (changes.debounceTime) {\n            this.addQuillEventListeners();\n        }\n        /* eslint-enable @typescript-eslint/dot-notation */\n    }\n    addClasses(classList) {\n        QuillEditorBase.normalizeClassNames(classList).forEach((c) => {\n            this.renderer.addClass(this.editorElem, c);\n        });\n    }\n    removeClasses(classList) {\n        QuillEditorBase.normalizeClassNames(classList).forEach((c) => {\n            this.renderer.removeClass(this.editorElem, c);\n        });\n    }\n    writeValue(currentValue) {\n        // optional fix for https://github.com/angular/angular/issues/14988\n        if (this.filterNull && currentValue === null) {\n            return;\n        }\n        this.content = currentValue;\n        if (!this.quillEditor) {\n            return;\n        }\n        const format = getFormat(this.format, this.service.config.format);\n        const newValue = this.valueSetter(this.quillEditor, currentValue);\n        if (this.compareValues) {\n            const currentEditorValue = this.quillEditor.getContents();\n            if (JSON.stringify(currentEditorValue) === JSON.stringify(newValue)) {\n                return;\n            }\n        }\n        if (currentValue) {\n            if (format === 'text') {\n                this.quillEditor.setText(currentValue);\n            }\n            else {\n                this.quillEditor.setContents(newValue);\n            }\n            return;\n        }\n        this.quillEditor.setText('');\n    }\n    setDisabledState(isDisabled = this.disabled) {\n        // store initial value to set appropriate disabled status after ViewInit\n        this.disabled = isDisabled;\n        if (this.quillEditor) {\n            if (isDisabled) {\n                this.quillEditor.disable();\n                this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\n            }\n            else {\n                if (!this.readOnly) {\n                    this.quillEditor.enable();\n                }\n                this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n            }\n        }\n    }\n    registerOnChange(fn) {\n        this.onModelChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onModelTouched = fn;\n    }\n    registerOnValidatorChange(fn) {\n        this.onValidatorChanged = fn;\n    }\n    validate() {\n        if (!this.quillEditor) {\n            return null;\n        }\n        const err = {};\n        let valid = true;\n        const text = this.quillEditor.getText();\n        // trim text if wanted + handle special case that an empty editor contains a new line\n        const textLength = this.trimOnValidation ? text.trim().length : (text.length === 1 && text.trim().length === 0 ? 0 : text.length - 1);\n        const deltaOperations = this.quillEditor.getContents().ops;\n        const onlyEmptyOperation = deltaOperations && deltaOperations.length === 1 && ['\\n', ''].includes(deltaOperations[0].insert);\n        if (this.minLength && textLength && textLength < this.minLength) {\n            err.minLengthError = {\n                given: textLength,\n                minLength: this.minLength\n            };\n            valid = false;\n        }\n        if (this.maxLength && textLength > this.maxLength) {\n            err.maxLengthError = {\n                given: textLength,\n                maxLength: this.maxLength\n            };\n            valid = false;\n        }\n        if (this.required && !textLength && onlyEmptyOperation) {\n            err.requiredError = {\n                empty: true\n            };\n            valid = false;\n        }\n        return valid ? null : err;\n    }\n    addQuillEventListeners() {\n        this.dispose();\n        // We have to enter the `<root>` zone when adding event listeners, so `debounceTime` will spawn the\n        // `AsyncAction` there w/o triggering change detections. We still re-enter the Angular's zone through\n        // `zone.run` when we emit an event to the parent component.\n        this.zone.runOutsideAngular(() => {\n            this.subscription = new Subscription();\n            this.subscription.add(\n            // mark model as touched if editor lost focus\n            fromEvent(this.quillEditor, 'selection-change').subscribe(([range, oldRange, source]) => {\n                this.selectionChangeHandler(range, oldRange, source);\n            }));\n            // The `fromEvent` supports passing JQuery-style event targets, the editor has `on` and `off` methods which\n            // will be invoked upon subscription and teardown.\n            let textChange$ = fromEvent(this.quillEditor, 'text-change');\n            let editorChange$ = fromEvent(this.quillEditor, 'editor-change');\n            if (typeof this.debounceTime === 'number') {\n                textChange$ = textChange$.pipe(debounceTime(this.debounceTime));\n                editorChange$ = editorChange$.pipe(debounceTime(this.debounceTime));\n            }\n            this.subscription.add(\n            // update model if text changes\n            textChange$.subscribe(([delta, oldDelta, source]) => {\n                this.textChangeHandler(delta, oldDelta, source);\n            }));\n            this.subscription.add(\n            // triggered if selection or text changed\n            editorChange$.subscribe(([event, current, old, source]) => {\n                this.editorChangeHandler(event, current, old, source);\n            }));\n        });\n    }\n    dispose() {\n        if (this.subscription !== null) {\n            this.subscription.unsubscribe();\n            this.subscription = null;\n        }\n    }\n}\nQuillEditorBase.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillEditorBase, deps: [{ token: i0.Injector }, { token: i0.ElementRef }, { token: i0.ChangeDetectorRef }, { token: i1.DomSanitizer }, { token: PLATFORM_ID }, { token: i0.Renderer2 }, { token: i0.NgZone }, { token: QuillService }], target: i0.ɵɵFactoryTarget.Directive });\nQuillEditorBase.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.3\", type: QuillEditorBase, inputs: { format: \"format\", theme: \"theme\", modules: \"modules\", debug: \"debug\", readOnly: \"readOnly\", placeholder: \"placeholder\", maxLength: \"maxLength\", minLength: \"minLength\", required: \"required\", formats: \"formats\", customToolbarPosition: \"customToolbarPosition\", sanitize: \"sanitize\", styles: \"styles\", strict: \"strict\", scrollingContainer: \"scrollingContainer\", bounds: \"bounds\", customOptions: \"customOptions\", customModules: \"customModules\", trackChanges: \"trackChanges\", preserveWhitespace: \"preserveWhitespace\", classes: \"classes\", trimOnValidation: \"trimOnValidation\", linkPlaceholder: \"linkPlaceholder\", compareValues: \"compareValues\", filterNull: \"filterNull\", debounceTime: \"debounceTime\", defaultEmptyValue: \"defaultEmptyValue\", valueGetter: \"valueGetter\", valueSetter: \"valueSetter\" }, outputs: { onEditorCreated: \"onEditorCreated\", onEditorChanged: \"onEditorChanged\", onContentChanged: \"onContentChanged\", onSelectionChanged: \"onSelectionChanged\", onFocus: \"onFocus\", onBlur: \"onBlur\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillEditorBase, decorators: [{\n            type: Directive\n        }], ctorParameters: function () {\n        return [{ type: i0.Injector }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i1.DomSanitizer }, { type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }, { type: i0.Renderer2 }, { type: i0.NgZone }, { type: QuillService }];\n    }, propDecorators: { format: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], modules: [{\n                type: Input\n            }], debug: [{\n                type: Input\n            }], readOnly: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], maxLength: [{\n                type: Input\n            }], minLength: [{\n                type: Input\n            }], required: [{\n                type: Input\n            }], formats: [{\n                type: Input\n            }], customToolbarPosition: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }], styles: [{\n                type: Input\n            }], strict: [{\n                type: Input\n            }], scrollingContainer: [{\n                type: Input\n            }], bounds: [{\n                type: Input\n            }], customOptions: [{\n                type: Input\n            }], customModules: [{\n                type: Input\n            }], trackChanges: [{\n                type: Input\n            }], preserveWhitespace: [{\n                type: Input\n            }], classes: [{\n                type: Input\n            }], trimOnValidation: [{\n                type: Input\n            }], linkPlaceholder: [{\n                type: Input\n            }], compareValues: [{\n                type: Input\n            }], filterNull: [{\n                type: Input\n            }], debounceTime: [{\n                type: Input\n            }], defaultEmptyValue: [{\n                type: Input\n            }], onEditorCreated: [{\n                type: Output\n            }], onEditorChanged: [{\n                type: Output\n            }], onContentChanged: [{\n                type: Output\n            }], onSelectionChanged: [{\n                type: Output\n            }], onFocus: [{\n                type: Output\n            }], onBlur: [{\n                type: Output\n            }], valueGetter: [{\n                type: Input\n            }], valueSetter: [{\n                type: Input\n            }] } });\nclass QuillEditorComponent extends QuillEditorBase {\n    constructor(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service) {\n        super(injector, elementRef, cd, domSanitizer, platformId, renderer, zone, service);\n    }\n}\nQuillEditorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillEditorComponent, deps: [{ token: i0.Injector }, { token: ElementRef }, { token: ChangeDetectorRef }, { token: DomSanitizer }, { token: PLATFORM_ID }, { token: Renderer2 }, { token: NgZone }, { token: QuillService }], target: i0.ɵɵFactoryTarget.Component });\nQuillEditorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.3\", type: QuillEditorComponent, selector: \"quill-editor\", providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            useExisting: forwardRef(() => QuillEditorComponent)\n        },\n        {\n            multi: true,\n            provide: NG_VALIDATORS,\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            useExisting: forwardRef(() => QuillEditorComponent)\n        }\n    ], usesInheritance: true, ngImport: i0, template: `\n  <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n`, isInline: true, styles: [\":host{display:inline-block}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillEditorComponent, decorators: [{\n            type: Component,\n            args: [{\n                    encapsulation: ViewEncapsulation.None,\n                    providers: [\n                        {\n                            multi: true,\n                            provide: NG_VALUE_ACCESSOR,\n                            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                            useExisting: forwardRef(() => QuillEditorComponent)\n                        },\n                        {\n                            multi: true,\n                            provide: NG_VALIDATORS,\n                            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                            useExisting: forwardRef(() => QuillEditorComponent)\n                        }\n                    ],\n                    selector: 'quill-editor',\n                    template: `\n  <ng-content select=\"[quill-editor-toolbar]\"></ng-content>\n`,\n                    styles: [\n                        `\n    :host {\n      display: inline-block;\n    }\n    `\n                    ]\n                }]\n        }], ctorParameters: function () {\n        return [{ type: i0.Injector }, { type: i0.ElementRef, decorators: [{\n                        type: Inject,\n                        args: [ElementRef]\n                    }] }, { type: i0.ChangeDetectorRef, decorators: [{\n                        type: Inject,\n                        args: [ChangeDetectorRef]\n                    }] }, { type: i1.DomSanitizer, decorators: [{\n                        type: Inject,\n                        args: [DomSanitizer]\n                    }] }, { type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }, { type: i0.Renderer2, decorators: [{\n                        type: Inject,\n                        args: [Renderer2]\n                    }] }, { type: i0.NgZone, decorators: [{\n                        type: Inject,\n                        args: [NgZone]\n                    }] }, { type: QuillService, decorators: [{\n                        type: Inject,\n                        args: [QuillService]\n                    }] }];\n    } });\n\nclass QuillViewHTMLComponent {\n    constructor(sanitizer, service) {\n        this.sanitizer = sanitizer;\n        this.service = service;\n        this.content = '';\n        this.sanitize = false;\n        this.innerHTML = '';\n        this.themeClass = 'ql-snow';\n    }\n    ngOnChanges(changes) {\n        if (changes.theme) {\n            const theme = changes.theme.currentValue || (this.service.config.theme ? this.service.config.theme : 'snow');\n            this.themeClass = `ql-${theme} ngx-quill-view-html`;\n        }\n        else if (!this.theme) {\n            const theme = this.service.config.theme ? this.service.config.theme : 'snow';\n            this.themeClass = `ql-${theme} ngx-quill-view-html`;\n        }\n        if (changes.content) {\n            const content = changes.content.currentValue;\n            this.innerHTML = this.sanitize ? content : this.sanitizer.bypassSecurityTrustHtml(content);\n        }\n    }\n}\nQuillViewHTMLComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillViewHTMLComponent, deps: [{ token: DomSanitizer }, { token: QuillService }], target: i0.ɵɵFactoryTarget.Component });\nQuillViewHTMLComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.3\", type: QuillViewHTMLComponent, selector: \"quill-view-html\", inputs: { content: \"content\", theme: \"theme\", sanitize: \"sanitize\" }, usesOnChanges: true, ngImport: i0, template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`, isInline: true, styles: [\".ql-container.ngx-quill-view-html{border:0}\\n\"], directives: [{ type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillViewHTMLComponent, decorators: [{\n            type: Component,\n            args: [{\n                    encapsulation: ViewEncapsulation.None,\n                    selector: 'quill-view-html',\n                    styles: [`\n.ql-container.ngx-quill-view-html {\n  border: 0;\n}\n`],\n                    template: `\n  <div class=\"ql-container\" [ngClass]=\"themeClass\">\n    <div class=\"ql-editor\" [innerHTML]=\"innerHTML\">\n    </div>\n  </div>\n`\n                }]\n        }], ctorParameters: function () {\n        return [{ type: i1.DomSanitizer, decorators: [{\n                        type: Inject,\n                        args: [DomSanitizer]\n                    }] }, { type: QuillService }];\n    }, propDecorators: { content: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }] } });\n\nclass QuillViewComponent {\n    constructor(elementRef, renderer, zone, service, domSanitizer, platformId) {\n        this.elementRef = elementRef;\n        this.renderer = renderer;\n        this.zone = zone;\n        this.service = service;\n        this.domSanitizer = domSanitizer;\n        this.platformId = platformId;\n        this.sanitize = false;\n        this.strict = true;\n        this.customModules = [];\n        this.customOptions = [];\n        this.preserveWhitespace = false;\n        this.onEditorCreated = new EventEmitter();\n        this.quillSubscription = null;\n        this.valueSetter = (quillEditor, value) => {\n            const format = getFormat(this.format, this.service.config.format);\n            let content = value;\n            if (format === 'text') {\n                quillEditor.setText(content);\n            }\n            else {\n                if (format === 'html') {\n                    if (this.sanitize) {\n                        value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\n                    }\n                    content = quillEditor.clipboard.convert(value);\n                }\n                else if (format === 'json') {\n                    try {\n                        content = JSON.parse(value);\n                    }\n                    catch (e) {\n                        content = [{ insert: value }];\n                    }\n                }\n                quillEditor.setContents(content);\n            }\n        };\n    }\n    ngOnChanges(changes) {\n        if (!this.quillEditor) {\n            return;\n        }\n        if (changes.content) {\n            this.valueSetter(this.quillEditor, changes.content.currentValue);\n        }\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platformId)) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        this.quillSubscription = this.service.getQuill().subscribe(Quill => {\n            const modules = Object.assign({}, this.modules || this.service.config.modules);\n            modules.toolbar = false;\n            this.customOptions.forEach((customOption) => {\n                const newCustomOption = Quill.import(customOption.import);\n                newCustomOption.whitelist = customOption.whitelist;\n                Quill.register(newCustomOption, true);\n            });\n            this.customModules.forEach(({ implementation, path }) => {\n                Quill.register(path, implementation);\n            });\n            let debug = this.debug;\n            if (!debug && debug !== false && this.service.config.debug) {\n                debug = this.service.config.debug;\n            }\n            let formats = this.formats;\n            if (!formats && formats === undefined) {\n                formats = this.service.config.formats ?\n                    Object.assign({}, this.service.config.formats) : (this.service.config.formats === null ? null : undefined);\n            }\n            const theme = this.theme || (this.service.config.theme ? this.service.config.theme : 'snow');\n            this.elementRef.nativeElement.insertAdjacentHTML('afterbegin', this.preserveWhitespace ? '<pre quill-view-element></pre>' : '<div quill-view-element></div>');\n            this.editorElem = this.elementRef.nativeElement.querySelector('[quill-view-element]');\n            this.zone.runOutsideAngular(() => {\n                this.quillEditor = new Quill(this.editorElem, {\n                    debug: debug,\n                    formats: formats,\n                    modules,\n                    readOnly: true,\n                    strict: this.strict,\n                    theme\n                });\n            });\n            this.renderer.addClass(this.editorElem, 'ngx-quill-view');\n            if (this.content) {\n                this.valueSetter(this.quillEditor, this.content);\n            }\n            // The `requestAnimationFrame` triggers change detection. There's no sense to invoke the `requestAnimationFrame` if anyone is\n            // listening to the `onEditorCreated` event inside the template, for instance `<quill-view (onEditorCreated)=\"...\">`.\n            if (!this.onEditorCreated.observers.length) {\n                return;\n            }\n            // The `requestAnimationFrame` will trigger change detection and `onEditorCreated` will also call `markDirty()`\n            // internally, since Angular wraps template event listeners into `listener` instruction. We're using the `requestAnimationFrame`\n            // to prevent the frame drop and avoid `ExpressionChangedAfterItHasBeenCheckedError` error.\n            requestAnimationFrame(() => {\n                this.onEditorCreated.emit(this.quillEditor);\n            });\n        });\n    }\n    ngOnDestroy() {\n        var _a;\n        (_a = this.quillSubscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        this.quillSubscription = null;\n    }\n}\nQuillViewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillViewComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.NgZone }, { token: QuillService }, { token: i1.DomSanitizer }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component });\nQuillViewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.3\", type: QuillViewComponent, selector: \"quill-view\", inputs: { format: \"format\", theme: \"theme\", modules: \"modules\", debug: \"debug\", formats: \"formats\", sanitize: \"sanitize\", strict: \"strict\", content: \"content\", customModules: \"customModules\", customOptions: \"customOptions\", preserveWhitespace: \"preserveWhitespace\" }, outputs: { onEditorCreated: \"onEditorCreated\" }, usesOnChanges: true, ngImport: i0, template: `\n`, isInline: true, styles: [\".ql-container.ngx-quill-view{border:0}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillViewComponent, decorators: [{\n            type: Component,\n            args: [{\n                    encapsulation: ViewEncapsulation.None,\n                    selector: 'quill-view',\n                    styles: [`\n.ql-container.ngx-quill-view {\n  border: 0;\n}\n`],\n                    template: `\n`\n                }]\n        }], ctorParameters: function () {\n        return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.NgZone }, { type: QuillService }, { type: i1.DomSanitizer }, { type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }];\n    }, propDecorators: { format: [{\n                type: Input\n            }], theme: [{\n                type: Input\n            }], modules: [{\n                type: Input\n            }], debug: [{\n                type: Input\n            }], formats: [{\n                type: Input\n            }], sanitize: [{\n                type: Input\n            }], strict: [{\n                type: Input\n            }], content: [{\n                type: Input\n            }], customModules: [{\n                type: Input\n            }], customOptions: [{\n                type: Input\n            }], preserveWhitespace: [{\n                type: Input\n            }], onEditorCreated: [{\n                type: Output\n            }] } });\n\nclass QuillModule {\n    static forRoot(config) {\n        return {\n            ngModule: QuillModule,\n            providers: [\n                {\n                    provide: QUILL_CONFIG_TOKEN,\n                    useValue: config\n                }\n            ]\n        };\n    }\n}\nQuillModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nQuillModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillModule, declarations: [QuillEditorComponent,\n        QuillViewComponent,\n        QuillViewHTMLComponent], imports: [CommonModule], exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent] });\nQuillModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillModule, imports: [[CommonModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.3\", ngImport: i0, type: QuillModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        QuillEditorComponent,\n                        QuillViewComponent,\n                        QuillViewHTMLComponent\n                    ],\n                    exports: [QuillEditorComponent, QuillViewComponent, QuillViewHTMLComponent],\n                    imports: [CommonModule],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-quill\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { QUILL_CONFIG_TOKEN, QuillEditorBase, QuillEditorComponent, QuillModule, QuillService, QuillViewComponent, QuillViewHTMLComponent, defaultModules };\n"]},"metadata":{},"sourceType":"module"}